#include <stdio.h>
#include <stdbool.h>
#define MAX_WEIGHT 24

double w11[MAX_WEIGHT] = { 0.021263704,-0.16120319,-0.15327865,0.2418119,0.4326369,0.3334254,-0.44203806,-0.442784,-0.44304463,-0.13222785,-0.07646821,0.1951705,-0.5010686,-0.28951356,0.26508975,-0.37344694,-0.17038776,-0.14368331,0.23878293,0.1233263,-0.16357195,-0.05004015,-0.366149,0.48161513 };

double w12[MAX_WEIGHT] = { 0.39518586,0.29496807,-0.14540225,0.276785,0.3880462,0.018954001,0.008537086,-0.10265872,-0.2862795,0.24941826,0.31810206,0.22361863,-0.29550588,-0.09071103,-0.0016575253,-0.173145,0.33591005,-0.008036673,-0.39822716,-0.21844588,0.28962356,0.20003541,-0.20926797,0.30744007 };

double w13[MAX_WEIGHT] = { -0.022079602,-0.26648274,-0.09041253,0.29915318,0.22107573,-0.37471744,-0.26994398,-0.3948074,-0.32493073,0.083921306,0.15391602,0.33089456,0.32583642,-0.13070345,-0.25392857,-0.24918127,-0.33140957,-0.38584,0.339007,-0.08416822,0.11217434,0.08208969,-0.42139375,-0.12482087 };

double b1[MAX_WEIGHT] = { 0.39064175,-0.31792083,0.0,0.0642422,-0.12204502,0.05283491,-0.09015412,0.0,0.0,0.41280618,-0.13185862,0.06179546,-0.1160268,0.0,-0.052678823,0.0,0.19190256,0.0,-0.39910662,-0.16039546,-0.2360871,0.430458,0.0,-0.14092742 };

double w2[MAX_WEIGHT] = { 0.13049483,0.23412123,-0.35801515,0.13595945,-0.13225147,-0.021726713,0.21604851,-0.35560238,0.0007574558,0.13225347,-0.19394413,0.13668808,0.002107633,-0.20516324,0.02225559,-0.08217996,-0.13299714,0.0242711,-0.06534536,0.28114176,-0.3132657,0.20866902,-0.16535297,-0.05593589 };

double b2 = 0.099342704;


bool predict(double temp, double light, double humidity)
{
	double result = 0;

	for (int i = 0; i < MAX_WEIGHT; i++)
	{
		double tmp = (temp*w11[i] + light*w12[i] + humidity*w13[i]+ b1[i]);

		tmp = tmp < 0 ? 0 : tmp; // relu

		result += tmp*w2[i];
	}

	result += b2;

	return result < 0.5 ? false : true; 
}

int main()
{
	// Prediction in pyton
	// abs(model.predict([[150,40]]).round())

	int temperature[5] = {79, 83, 55, 10,25};
	int light[5] = { 76, 22,67,82,70};
	int humidity[5] = {50, 43,80,53,65};

	for (int i = 0; i < 5; i++)
	{
		printf("Temp: %d\tlight: %d\tHunmidity: %d\tAC: %d\n", temperature[i], light[i],humidity[i], predict(temperature[i], light[i], humidity[i]));
	}

	return 0;
}
